<!DOCTYPE html>
<html>
<head>
    <title>æˆ‘çš„ç§äººè´¦æœ¬æŠ¥è¡¨</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
        .chart-container { position: relative; height:40vh; width:80vw; max-width: 100%; }
    </style>
</head>
<body>
    <h1>ğŸ“Š æ¶ˆè´¹è¶‹åŠ¿ (æœ€è¿‘è®°å½•)</h1>
    <div class="chart-container">
        <canvas id="myChart"></canvas>
    </div>

    <script>
        async function loadData() {
            // æ›¿æ¢æˆä½ è‡ªå·±çš„ Worker åœ°å€
            const response = await fetch('https://money.pzdmmsd.workers.dev/api/data');
            const rawData = await response.json();

            // å¤„ç†æ•°æ®ç»™å›¾è¡¨ä½¿ç”¨
            const labels = rawData.map(item => item.date).reverse();
            const amounts = rawData.map(item => item.amount_cny).reverse();

            const ctx = document.getElementById('myChart').getContext('2d');
            new Chart(ctx, {
                type: 'line', // æŠ˜çº¿å›¾
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'æ¶ˆè´¹é‡‘é¢ (CNY)',
                        data: amounts,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                }
            });
        }
        loadData();
    </script>
</body>
</html>